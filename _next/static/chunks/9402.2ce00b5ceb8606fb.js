"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9402],{9402:function(e,t,n){n.r(t),n.d(t,{NewAccount:function(){return A}});var a=n(59499),r=n(50029),o=n(16835),c=n(87794),i=n.n(c),l=n(8621),s=n(95496),u=n(42162),d=n(41958),m=n(20392),p=n(31812),f=n(53640),_=n(63931),h=n(7631),b=n(24705),g=n(86174),x=n(42447),v=n(55378),y=n(84225),j=n(94184),w=n.n(j),N=n(87979),O=n(59106),k=n(8189),C=n(87751),I=n(11163),S=n(67294),P=n(87536),Z=n(77058),T=n(53918),V=n(60194),M=n(85893);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A=function(e){var t,n=e.amount,a=(0,v.TL)(),c=(0,h.gA)({}).data,p=(0,h.cM)({}).data,y=(0,b.OE)(),j=(0,o.Z)(y,2),T=j[0];j[1].isLoading;var B=(0,g.X)(),A=(0,o.Z)(B,2),L=A[0];A[1].isLoading;var D=(0,Z.$)().t,H=(0,I.useRouter)(),z=null==p?void 0:p.banks,F=null==c?void 0:c.types,Q=(0,m.P)().payout,q=null!==(t=null==Q?void 0:Q.limits)&&void 0!==t?t:{},K=q.minString,X=q.maxString,R=q.min,U=q.max,Y=(0,u.Z)(),$=Y.session,G=Y.user,J=(0,P.cI)({resolver:(0,s.X)((0,d.lo)({min:R-1,max:U,saldo:(null==G?void 0:G.saldoRetirable)/100,maxCurrency:X,minCurrency:K})),reValidateMode:"onChange",defaultValues:{method:"BANK_PAYOUT",type:"BANK",session:$,amount:n,num_doc:null==G?void 0:G.national_id}}),ee=J.handleSubmit,et=J.setValue,en=J.watch,ea=J.control,er=(J.getValues,J.formState),eo=er.errors,ec=er.isSubmitting;(0,S.useEffect)(function(){et("amount",n)},[n]);var ei,el=en("cci");(0,S.useEffect)(function(){if(!el){et("bank_name","");return}var e=null==el?void 0:el.substring(0,3),t=null==z?void 0:z.find(function(t){var n;return null==t?void 0:null===(n=t.code)||void 0===n?void 0:n.startsWith(e)});t?et("bank_name",null==t?void 0:t.name,{shouldValidate:!0}):et("bank_name","",{shouldValidate:!0})},[el,z]);var es=(ei=(0,r.Z)(i().mark(function e(t){var n,r,o,c,s,u,d;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Number(null==t?void 0:t.amount),r=F.filter(function(e){return e.type===t.account_type})[0].name,o={name:t.name_account,type:"BANK",config:{cci:t.cci,bank_name:t.bank_name,account_type:r,account_number:t.account_number}},e.next=5,T({session:G.session,payment_account:o});case 5:if(!("data"in(c=e.sent)&&"payment_account"in c.data)){e.next=18;break}return s=c.data.payment_account,e.next=10,L({session:G.session,method:null==t?void 0:t.method,amount:100*n,payment_account:s.toString()});case 10:if(!("data"in(u=e.sent)&&"OK"===u.data.result)){e.next=17;break}return(0,V.Xe)(t.amount),v.ZP.dispatch(b.ll.util.invalidateTags(["getPayoutHistory"])),e.next=16,H.push(l.H["/cuenta/retirar/estado-de-solicitud"].url);case 16:return e.abrupt("return");case 17:"data"in u&&"error"===u.data.result&&(d=u.data,(0,V.f4)(d.amount,D(d.description)),a((0,x.zp)({message:D(d.description),severity:"error"})));case 18:case"end":return e.stop()}},e)})),function(e){return ei.apply(this,arguments)});return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(E,{onSubmit:ee(es),children:[(0,M.jsx)("div",{className:"cci",children:(0,M.jsx)(P.Qr,{name:"cci",control:ea,defaultValue:"",render:function(e){var t=e.field;return(0,M.jsx)(f.Z,{fullWidth:!0,children:(0,M.jsx)(k.Z,W({fullWidth:!0,label:"Numero CCI* (20 d\xedgitos)*",variant:"outlined",hiddenLabel:!0,placeholder:"",inputProps:{maxLength:20},helperText:eo.cci?eo.cci.message:"",error:!!(null!=eo&&eo.cci)},t))})}})}),(0,M.jsx)("div",{className:"account_type",children:(0,M.jsx)(P.Qr,{name:"account_type",control:ea,rules:{required:!0},render:function(e){var t=e.field;return(0,M.jsx)(O.Z,W(W({},t),{},{label:"Tipo de Cuenta Bancaria*",error:!!(null!=eo&&eo.account_type),children:null==F?void 0:F.map(function(e){return(0,M.jsx)(_.Z,{value:e.type,children:e.name})})}))}})}),(0,M.jsx)("div",{className:"num_doc",children:(0,M.jsx)(P.Qr,{name:"num_doc",control:ea,defaultValue:"",render:function(e){var t=e.field;return(0,M.jsx)(f.Z,{fullWidth:!0,children:(0,M.jsx)(k.Z,W(W({fullWidth:!0},t),{},{className:w()({textfield__error:null==eo?void 0:eo.num_doc}),label:"Documento del Titular de la Cuenta*",variant:"outlined",hiddenLabel:!0,placeholder:"",helperText:eo.num_doc?eo.num_doc.message:"",InputProps:{readOnly:!0}}))})}})}),(0,M.jsx)("div",{className:"bank_name",children:(0,M.jsx)(P.Qr,{name:"bank_name",control:ea,defaultValue:"",render:function(e){var t=e.field;return(0,M.jsx)(f.Z,{fullWidth:!0,children:(0,M.jsx)(k.Z,W(W({fullWidth:!0},t),{},{className:w()({textfield__error:null==eo?void 0:eo.bank_name}),label:"Nombre del Banco*",variant:"outlined",placeholder:"Aparecer\xe1 al colocar el CCI",InputProps:{readOnly:!0}}))})}})}),(0,M.jsx)("div",{className:"account_number",children:(0,M.jsx)(P.Qr,{name:"account_number",control:ea,defaultValue:"",render:function(e){var t=e.field;return(0,M.jsx)(f.Z,{fullWidth:!0,children:(0,M.jsx)(k.Z,W(W({fullWidth:!0},t),{},{className:w()({textfield__error:null==eo?void 0:eo.account_number}),label:"N\xfamero de Cuenta Bancaria*",variant:"outlined",placeholder:"",helperText:eo.account_number?eo.account_number.message:""}))})}})}),(0,M.jsx)("div",{className:"name_account",children:(0,M.jsx)(P.Qr,{name:"name_account",control:ea,defaultValue:"",render:function(e){var t=e.field;return(0,M.jsx)(f.Z,{fullWidth:!0,children:(0,M.jsx)(k.Z,W(W({fullWidth:!0,className:w()({textfield__error:null==eo?void 0:eo.name_account})},t),{},{label:"Nombre de Cuenta Bancaria (opcional)",variant:"outlined",placeholder:"",helperText:eo.name_account?eo.name_account.message:""}))})}})}),(0,M.jsx)(C.E.div,{className:"action",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,M.jsx)(C.E.div,{whileTap:{scale:.8},children:(0,M.jsx)(N.z,{type:"submit",loading:ec,fullWidth:!0,children:"Enviar Solicitud"})})})]})})},E=T.default.form.withConfig({displayName:"NewAccount__BankTransferCss",componentId:"sc-1hxu25u-0"})(["width:100%;gap:1rem;display:grid;grid-template-columns:repeat(1,minmax(0,1fr));.action{display:grid;place-items:center;> div{width:min(65%,20rem);}}",'{grid-template-columns:repeat(4,minmax(0,1fr));grid-template-areas:"cci 			cci 		account_type 	  account_type" "num_doc 		num_doc 	bank_name 			bank_name" "account_number		account_number 		name_account 	name_account" "action			action 		 action 		    action";.cci{grid-area:cci;}.account_type{grid-area:account_type;}.num_doc{grid-area:num_doc;}.bank_name{grid-area:bank_name;}.account_number{grid-area:account_number;}.name_account{grid-area:name_account;}.action{grid-area:action;}}'],y.q.min_width.desktopS);(0,T.default)(p.Z).withConfig({displayName:"NewAccount__StyledLoadingButton",componentId:"sc-1hxu25u-1"})(["&&{padding:0.9rem 1rem;min-width:200px;max-width:max-content;margin:auto;text-transform:initial;font-size:1rem;line-height:initial;}"]),T.default.div.withConfig({displayName:"NewAccount__Styled",componentId:"sc-1hxu25u-2"})(["padding:30px;","{padding:40px 30px;}"],y.q.min_width.desktopS),T.default.form.withConfig({displayName:"NewAccount__StyledForm",componentId:"sc-1hxu25u-3"})(["max-width:700px;margin:auto;",""],(0,T.css)(["display:grid;grid-template-columns:repeat(1,1fr);gap:2rem 1.5rem;","{grid-template-columns:repeat(2,1fr);> .form-button{grid-column:span 2;}}"],y.q.min_width.tabletL))},60194:function(e,t,n){n.d(t,{Xe:function(){return o},f4:function(){return r}});var a=n(3841),r=function(e,t){a.f.push({event:"atm.event",eventName:"retiro_metodos_de_retiro",payout_option:"transferencia bancaria",amount:"S/ ".concat(String(e)),action:"view",option:"retiro en curso",payout_message:t.toLowerCase()})},o=function(e){a.f.push({event:"atm.event",eventName:"retiro_metodos_de_retiro",payout_option:"transferencia bancaria",amount:"S/".concat(String(e)),option:"enviar solicitud",action:"click"})}},59106:function(e,t,n){var a=n(59499),r=n(16835),o=n(4730),c=n(53640),i=n(60076),l=n(69587),s=n(94184),u=n.n(s),d=n(6767),m=n.n(d),p=n(67294),f=n(89583),_=n(53918),h=n(85893),b=["children","label","name","error","success","id","className"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=p.forwardRef(function(e,t){var n=e.children,a=e.label,c=e.name,i=e.error,l=e.success,s=e.id,d=e.className,m=(0,o.Z)(e,b),_=p.useState(""),g=(0,r.Z)(_,2),v=g[0],O=g[1],k=function(e){O(e.target.value)};return(0,h.jsxs)(j,{ref:t,className:u()("select__apuestatotal select__formcontrol ".concat(d)),fullWidth:!0,children:[(0,h.jsx)(w,{id:"label".concat(c),error:!!i,className:u()("select__apuestatotal select__label",{select__error:i,select__success:l}),children:a}),(0,h.jsx)(N,x(x({labelId:"label".concat(c),id:s,value:v,label:a,onChange:k,error:!!i,inputProps:{name:c},MenuProps:{PaperProps:{style:{height:"auto",maxHeight:"500px",width:"0"}}},className:u()("select__apuestatotal select__select ".concat(d),{select__error:i,select__success:l})},m),{},{children:n})),l&&(0,h.jsx)(y,{children:(0,h.jsx)(f.l_A,{})})]})});t.Z=v;var y=_.default.div.withConfig({displayName:"Select__SuccessIconCss",componentId:"sc-1ip3v98-0"})(["position:absolute;top:calc((100% + .5rem) * -1);top:-.4rem;right:0rem;aspect-ratio:1;height:.9rem;width:.9rem;display:flex;justify-content:center;align-items:center;border-radius:50%;background:",";border:1px solid ",";box-shadow:0 0 0px .5px ",";z-index:2;> svg{height:75%;width:75%;color:",";}"],function(e){return e.theme.background},function(e){return e.theme.status.success},function(e){return e.theme.status.success},function(e){return e.theme.status.success}),j=(0,_.default)(c.Z).withConfig({displayName:"Select__FormControlCss",componentId:"sc-1ip3v98-1"})(["--paddingInputH :1rem;--paddingInputV :1rem;--transformVertical :calc(-.6rem);"]),w=(0,_.default)(i.Z).withConfig({displayName:"Select__InputLabelCss",componentId:"sc-1ip3v98-2"})(["&.select__label{transform:translate(var(--paddingInputH),var(--paddingInputV)) scale(1);transition:200ms;color:",";font-weight:400;max-width:calc(100% - 40px);}&.select__label.Mui-focused,&.select__label.MuiFormLabel-filled{transform:translate(var(--paddingInputH),var(--transformVertical)) scale(0.83);max-width:calc(133% - 40px);background:white;padding-right:0.6rem;}&.select__label.MuiFormLabel-filled{color:",";}&.select__label.Mui-focused{color:",";}&.select__error{&.select__label{color:",";}}&.select__success{&.select__label{color:",";}}"],function(e){return e.theme.contrastText},function(e){return e.theme.contrastText},function(e){return e.theme.status.info},function(e){return e.theme.status.error},function(e){return e.theme.contrastText}),N=(0,_.default)(l.Z).withConfig({displayName:"Select__SelectCss",componentId:"sc-1ip3v98-3"})(["&.select__apuestatotal .MuiSelect-select{font-size:1rem;padding:var(--paddingInputV) var(--paddingInputH);border-radius:.5rem;transition:200ms;background:white;&::placeholder{color:",";opacity:1;}}&.select__apuestatotal.MuiInputBase-root fieldset{transition:200ms;border:1px solid ",";border-radius:.5rem;}&.select__apuestatotal.MuiInputBase-root fieldset legend span{font-size:0.83rem;}&.select__apuestatotal.MuiInputBase-root.Mui-focused fieldset{box-shadow:0 0 5px ",";border:1px solid ",";}svg{color:",";}p.MuiFormHelperText-root{margin-left:var(--paddingInputH);color:",";font-size:.83rem;}&.select__error{&.select__apuestatotal.MuiInputBase-root fieldset{box-shadow:0 0 5px ",";border:1px solid ",";}}&.select__success{&.select__apuestatotal.MuiInputBase-root fieldset{box-shadow:0 0 2px ",";border:1px solid ",";}}"],function(e){return m()(e.theme.contrastText).alpha(.7)},function(e){return m()(e.theme.contrastText).lightness(80)},function(e){return e.theme.status.info},function(e){return e.theme.status.info},function(e){return e.theme.primary},function(e){return e.theme.status.error},function(e){return e.theme.status.error},function(e){return e.theme.status.error},function(e){return e.theme.status.success},function(e){return e.theme.status.success})}}]);