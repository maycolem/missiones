"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6113],{16113:function(t,e,a){a.r(e),a.d(e,{SocketCalimaco:function(){return N}});var n=a(16835),r=a(59499),i=a(50029),o=a(87794),s=a.n(o),u=a(95144),l=a(8621),c=a(32173),p=a(85835),d=a(42162),v=a(36772),f=a(44603),b=a(24705),g=a(82771),h=a(21510),m=a(42447),O=a(55378),y=a(11163),P=a(41248),k=a(85893);function E(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function j(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?E(Object(a),!0).forEach(function(e){(0,r.Z)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var w=function(t){var e,a=t.user,r=(0,P.I0)(),o=(0,d.Z)().refreshUserDetails,E=(0,v.Z)().resetUserToStore,w=(0,f.Z)(null).setJackpotPragmaticAction,N=(0,c.Z)(),_=(N.getCredentials,N.saveCredentials),x=(0,y.useRouter)(),T={host:"https://wallet.apuestatotal.com",path:"/api/notifications",cms:"https://www.apuestatotal.com",company:"ATP",user:null!=a?a:{session:"anonymous",user:"anonymous"},notificationCallback:(e=(0,i.Z)(s().mark(function t(e){var i,u,c,d,v,f,y,P,k,N,T;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="PRAGMATIC_JACKPOTS_UPDATE"===t.t0?3:"LOGIN_OK"===t.t0?5:"POPUP"===t.t0?7:"PROMOTION"===t.t0?9:"UPDATE_BALANCE"===t.t0?11:"LOW_BALANCE"===t.t0?13:"LOGIN_ERROR"===t.t0?14:"USER_VERIFIED"===t.t0?24:"SESSION_EXPIRED"===t.t0?32:41;break;case 3:return w(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.jackpots),t.abrupt("break",41);case 5:return null===(c=localStorage)||void 0===c||c.removeItem("IsLogout"),t.abrupt("break",41);case 7:return null!=e&&e.user&&null!=e&&e.group&&(r((0,h.xh)("notification")),O.ZP.dispatch(b.ll.util.invalidateTags(["Notificationv2"])),O.ZP.dispatch(b.ll.util.invalidateTags(["NotificationPendingv2"])),O.ZP.dispatch(b.ll.util.invalidateTags(["TotalNotificacionsv2"])),O.ZP.dispatch(b.ll.util.invalidateTags(["TotalPendingtNotificacionsv2"]))),t.abrupt("break",41);case 9:return r((0,h.xh)("promotion")),t.abrupt("break",41);case 11:return e.data&&(O.ZP.dispatch(b.ll.util.invalidateTags(["OperationsHistory","OperationsHistoryv2"])),d=null==a?void 0:a.accounts,v=null==e?void 0:e.data,f=new Map,d.forEach(function(t){f.set(null==t?void 0:t.account,t)}),v.forEach(function(t){f.set(null==t?void 0:t.account,t)}),y=Array.from(f.values()),a.session&&(P=j(j({},a),{},{accounts:y}),r((0,g.av)(P)))),t.abrupt("break",41);case 13:case 20:case 36:return t.abrupt("break",41);case 14:if(!p.N){t.next=21;break}return t.next=17,_({email:"",password:""});case 17:return E(),t.next=20,x.push({pathname:l.H["/app/login"].url,query:{autologin:"without_auto_login"}});case 21:return r((0,g.mc)()),location.reload(),t.abrupt("break",41);case 24:return t.next=26,o(null==a?void 0:a.session);case 26:return k=t.sent,(N=(0,n.Z)(k,2))[0],N[1]&&r((0,m.zp)({message:"Sobrino tu cuenta ha sido verificada.",severity:"success",open:!0,autoHideDuration:3e3})),t.abrupt("break",41);case 32:if(!p.N){t.next=37;break}return E(),t.next=36,x.push({pathname:l.H["/app/login"].url,query:{autologin:"without_auto_login"}});case 37:return r((0,g.mc)()),null===(u=localStorage)||void 0===u||u.setItem("IsLogout",JSON.stringify("true")),location.reload(),t.abrupt("break",41);case 41:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)})};return(0,k.jsx)("div",{id:"9895834dsdasdsadsads324-at",style:{opacity:"0",pointerEvents:"none",position:"absolute",visibility:"hidden",transform:"translateX(-200px)"},children:(0,k.jsx)(u.NotificationClient,{config:T})})},N=function(){var t=(0,v.Z)(),e=t.isAuth,a=t.user;return e?(0,k.jsx)("div",{id:"9895834dsdasdsadsads324-at",style:{opacity:"0",pointerEvents:"none",position:"absolute",visibility:"hidden"},children:(0,k.jsx)(w,{user:a})}):(0,k.jsx)(k.Fragment,{})}},44603:function(t,e,a){var n=a(27812),r=a(55378),i=a(67294),o=a(56408),s=a(13674),u=function(t){var e,a=null===(e=null==t?void 0:t.skip)||void 0===e||e,u=(0,r.TL)(),l=(0,r.CG)(s.Eh),c=(0,o.dY)(null,{skip:a}).data;(0,i.useEffect)(function(){var t,e;(null==l||null===(t=l.pragmatic)||void 0===t||null===(e=t.levels)||void 0===e||!e.length)&&c&&p(c)},[c]);var p=function(t){if(null!=t&&t.length){var e,a,r=(0,n.Z)(t),i=r.sort(function(t,e){var a=t.amount;return e.amount-a}).map(function(t,e){var a;return{value:t.amount,valueName:0===e?"Grand":1===e?"Mega":2===e?"Major":3===e?"Minor":void 0}});u((0,s.M4)({levels:i,games_ids:null===(e=r[0])||void 0===e?void 0:null===(a=e.games)||void 0===a?void 0:a.split(",")}))}};return{setJackpotPragmaticAction:p,jackpots:l}};e.Z=u}}]);